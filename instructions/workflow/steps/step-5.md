# Step 4: 커밋 시퀀스(작업 계획) 작성

이 단계는 `/plan/overview.md`의 구현 방침을 **어떤 순서로 커밋할지** 결정하는 단계입니다.

**목표**:
- **커밋 순서**를 명확히 하기 (순서 = 의존성)
- 작은 커밋 단위로 쪼개서 리뷰하기 쉽게 만들기
- Conflict 최소화를 위한 순서 설계

**구현 상세는 overview.md에 이미 있으므로, 여기서는 순서만 집중합니다.**

## 작성 양식 (`/plan/commit-sequence.md`)

### 0. 참고 자료 (References)
- `/plan/background.md`
- `/plan/codebase-audit.md`
- `/plan/overview.md`

### 1. 작성 형식

**형식**:
```markdown
**Phase N: [Phase 이름]**
1. [커밋 타입]: 커밋 메시지
   - 이 커밋에서 구체적으로 무엇을 하는지 한 줄 설명

2. [커밋 타입]: 커밋 메시지
   - 한 줄 설명
```

**작성 원칙**:
- ✅ 위에서 아래로 순차 진행 (순서가 곧 의존성)
- ❌ 상세 구현 방법은 작성 안 함 (overview.md에 있음)

## 커밋 순서 가이드

다음 순서로 커밋을 쌓는 것을 권장합니다. 더 좋은 순서가 있다면 사용자에게 제안하세요.

### Phase 0. 사전 작업 (Conflict 방지)

**1. Deprecated 처리**
- 기존 모듈 대체 시 바로 삭제 말고 `@deprecated` 먼저
```typescript
/**
 * @deprecated 대신 NewModule 사용
 */
function deprecatedSomeFunction() {}
```

**2. 기존 코드 리팩토링**
- 파라미터 타입 변경 등은 새 기능 구현 전에 먼저 수정
- **이유**: 나중에 수정하면 Rebase 시 Conflict 폭발

**3. 파일 분리**
- 150줄+ 파일에 코드 추가 예정이면 먼저 분리
- **예시**: UserPage (200줄) → UserPage + UserProfile + UserActions로 분리 후 → 새 기능 추가

### Phase 1. 기초 공사

**4. 타입 정의**
- 모든 구현의 기준이 되는 타입을 가장 먼저
- **이유**: 모든 코드의 기반

**5. API 함수**
- 백엔드 API 준비됐으면 호출 함수 작성 (없으면 생략)
- **이유**: Hook/컴포넌트 구현 시 데이터 흐름 명확히

**6. 단위 모듈 또는 가장 작은 컴포넌트 마크업 (Unit Level)**
- **특징**: 로직 없이 마크업만 있거나, 외부 의존성 없는 순수 함수. (유닛 테스트 가능)
- **작업 대상**:
  1. 공통 UI 컴포넌트 (도메인 비종속. 예: `Button`)
  2. 도메인 기초 UI 컴포넌트 (도메인 종속. 예: `BoardCard`)
  3. 유틸리티/포매팅 함수 (도메인 비종속, 예: `formatDate`)
  4. 상수 (도메인 종속, 예: `BOARD_FILTER_TYPES`)
  5. **상태별 UI** (Empty, Loading, Error 상태 등 마크업 미리 구현)
- **[중요] 작업 우선순위 (Dependency Order)**:
  - 의존성 관리를 위해 **도메인에 종속되지 않는 공통 모듈(Common Type/Component/Utils)**을 가장 먼저 작업하세요.
  - 그 후에 이를 사용하는 **특정 도메인에 종속되는 모듈**을 작업해야 합니다.

### Phase 2. 통합

**7. Mock 기반 통합**
- Mock API로 더미 데이터 반환
- Hook 구현 (useQuery 등)
- 페이지 조립 (단위 컴포넌트 조합)

### Phase 3. 연동

**8. 실제 API 연동**
- Mock → 실제 API 교체
- 에러 처리 (4xx, 5xx → ErrorComponent)
- 엣지 케이스 (빈 데이터 → EmptyContent)

---

## 최종 검토 체크리스트

- [ ] `/plan/overview.md`의 모든 핵심 기능이 커밋 계획에 포함되었는지 확인
- [ ] 누락된 기능이 있다면 즉시 커밋 추가

---

## [CRITICAL] 다음 단계로 넘어가기 전 필수 확인

**⚠️ commit-sequence.md 작성을 완료한 후, 다음 단계(구현)로 넘어가기 전에 사용자 확인이 필요합니다.**

### AI의 필수 질문 (다음 단계 진행 전)

사용자에게 다음과 같이 안내하세요:

> "commit-sequence.md 작성 완료했습니다.
>
> **작성한 commit-sequence.md를 읽고 이해하셨나요?**
>
> - 순서가 논리적으로 맞나요?
> - 너무 큰 커밋은 없나요? (필요시 분할)
> - 수정이 필요한 부분이 있나요?
>
> ⚠️ **커밋 순서를 충분히 이해하지 못한 상태에서 다음 단계로 넘어가면, 구현 중 순서 변경으로 혼란이 발생합니다.**
>
> **[중요] 구현 진행 방식**:
>
> ⚠️ **한번에 모든 커밋을 구현하지 마세요!**
>
> **추천 방식**:
> 1. commit-sequence를 그룹으로 나눠서 진행
>    - 예: 총 15개 커밋이면 → 1~5번(타입/API) / 6~10번(컴포넌트) / 11~15번(통합) 등
> 2. 첫 그룹(예: 1~5번)만 먼저 구현
> 3. 구현 완료 후 사용자 리뷰
> 4. 다음 그룹 구현 반복
>
> **이유**:
> - 한번에 모두 구현하면 중간에 문제 발견 시 많은 코드를 수정해야 함
> - 그룹별로 리뷰하면 문제를 빠르게 발견하고 수정 가능
>
> 모든 내용을 이해하셨다면 승인해주세요. 어떤 그룹부터 시작할까요?"