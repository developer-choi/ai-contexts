# Step 5: 구현

`/plan/pr{N}/overview.md` 구현 방침을 바탕으로 **코드 작성 및 커밋** 단계입니다.

**목표**:
- overview.md에 정의된 기능 구현
- 작은 커밋 단위로 리뷰하기 쉽게 만들기

---

## 커밋 순서 가이드

다음 순서로 커밋을 쌓는 것을 권장합니다. 더 좋은 순서가 있다면 사용자에게 제안하세요.

### Phase 0. 사전 작업 (Conflict 방지)
**1. Deprecated 처리**
- 기존 모듈 대체 시 바로 삭제 말고 `@deprecated` 먼저
```typescript
/**
 * @deprecated 대신 NewModule 사용
 */
function deprecatedSomeFunction() {}
```

2. **기존 코드 리팩토링**: 파라미터 타입 변경 등 (나중에 Conflict 방지)
3. **파일 분리**: 관심사/책임 많아지면 역할 기반으로 분리

### Phase 1. 기초 공사
4. **타입 정의**: 모든 구현의 기준
5. **API 함수**: 백엔드 API 준비됐으면 호출 함수 작성
6. **단위 모듈/컴포넌트 마크업**:
   - 공통 UI 컴포넌트 (도메인 비종속)
   - 도메인 기초 UI 컴포넌트 (도메인 종속)
   - 유틸리티/포매팅 함수
   - 상수
   - 상태별 UI (Empty, Loading, Error)
   - **우선순위**: 공통 모듈 → 도메인 종속 모듈

### Phase 2. 통합
7. **Mock 기반 통합**: Mock API, Hook 구현, 페이지 조립

### Phase 3. 연동
8. **실제 API 연동**: Mock → 실제 API, 에러 처리, 엣지 케이스

---

## [CRITICAL] 구현 진행 방식

**⚠️ 한번에 모든 Phase 구현 금지!**

### 1. 참고 컨벤션 탐색 (최초 1회)

`instructions/conventions/coding/` 하위 파일 **제목**을 훑고 이번 PR 작업과 관련된 파일을 리스트업하여 `/plan/pr{N}/overview.md`에 추가합니다. 파일 내용은 읽지 않고 제목만 보고 판단합니다.

```markdown
## 참고 컨벤션
- `폴더경로/파일명.md`
- `폴더경로/파일명.md`
```

> 이 목록의 파일은 **코드 작성 전 반드시 읽기**.

### 2. Phase별 반복

1. **각 Phase 시작 전 plan mode로 진입**하여 다음을 포함한 계획 제출:
   - 수정/생성할 파일 탐색
   - **위 커밋 순서 가이드를 기반으로 커밋 단위 분리**: 각 커밋에 포함될 파일과 변경 내용을 명시
   - 예시 형식 (순서는 위 커밋 순서 가이드 참고):
     ```
     Commit 1: 커밋 메시지
     Commit 2: 커밋 메시지
     Commit 3: 커밋 메시지
     ```
2. 사용자 승인 후, **계획된 커밋 순서대로 1커밋씩 실행**
   - 1커밋 = 코드 작성 → 빌드 확인 → 즉시 커밋
   - 다음 커밋 작업은 이전 커밋 완료 후 시작
3. 커밋 누락 확인 (uncommitted 변경사항 없는지 점검)
4. 모든 커밋 완료 후 사용자 리뷰
5. 다음 Phase 반복

**⚠️ 코드 작성 후 커밋 필수!**

- 파일을 생성하거나 수정한 뒤, 다음 파일 작업으로 넘어가기 전에 반드시 커밋
- 빌드 확인 후 커밋하지 않고 "커밋할까요?" 질문 금지. 바로 커밋할 것
- 사용자에게 커밋 여부를 묻지 말 것

**이유**: 한번에 구현하면 중간 문제 발견 시 많은 코드 수정 필요. Phase별 리뷰로 빠른 발견/수정

### Phase 완료 전 자가 점검

사용자에게 보고하기 전, 다음을 수행:
1. overview.md의 **참고 컨벤션** 파일을 다시 열어 작성한 코드와 대조
2. 위반 사항이 있으면 수정 후 커밋
3. 응집도/결합도 관점에서 리뷰

### Phase 완료 시 안내

사용자에게 다음과 같이 안내:

> "Phase [N] ([Phase 이름]) 완료.
>
> Gemini CLI로 코드 풀질 검증 후 리뷰 부탁드립니다.
>
> **Gemini CLI 검증 항목**:
> 1. 테스트 스크립트 실행 (`package.json`의 scripts 확인)
> 2. 컨벤션 준수 확인 (`instructions/conventions/README.md` 참고)

### 모든 Phase 완료 시

사용자에게 다음과 같이 안내하세요:

> "모든 구현 완료.
>
> - [ ] `/plan/pr{N}/overview.md`의 모든 핵심 기능이 구현되었는지 확인해주세요.
> - [ ] 누락된 기능이 있다면 말씀해주세요.
>
> 문제없으면 다음 단계(최종 점검)로 넘어갈게요."
