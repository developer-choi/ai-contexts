# Step 4: 구현 방침 상세화

> ⚠️ Step 3에서 기술 전략 확정 후, **구체적인 구현 방침**을 작성합니다.

---

## 작성 목적

- Step 3: "무엇을(What) 선택할 것인가"
- Step 4: "어떻게(How) 구현할 것인가"의 큰 그림

AI가 코드 작성 시 이 문서를 기반으로:
- 로딩/성공/실패/엣지 케이스 대응 파악
- 영향 범위 확인 및 안전한 구현
- 중요한 비즈니스 로직 누락 방지

---

## 추가할 내용

`/plan/overview.md` 양식은 매번 바뀔 수 있으므로 적절한 필기 위치를 찾아서 아래 내용을 추가해주세요.

```markdown
**구현 방침**:
- **기본 흐름**: [핵심 처리 흐름 3-5단계 요약]
- **성공/실패/엣지 케이스**: [각 상황별 대응]
- **중요한 비즈니스 로직**: [재노출 기준, 권한 체크 시점 등]
- **수정/추가 파일**: [파일 경로 목록]
```

**예시**:
```markdown
**구현 방침**:
- **기본 흐름**: ConfirmModal 재사용, 네이티브 브릿지 API로 권한 확인
- **권한 GRANTED**: API 호출 → 성공 토스트 → 모달 닫기
- **권한 거부/미설정**: 설정 유도 모달 오픈
- **API 실패**: 에러 토스트, 모달 유지 (재시도 가능)
- **재노출**: localStorage에 마지막 닫은 시각 저장, 2주 후 재노출
- **수정/추가 파일**:
  - `src/pages/EventPage.tsx`
  - `src/hooks/useNotificationModal.ts` (신규)
```

---

## 작성 원칙

### 써야 할 것
- 상태별 대응 (로딩, 성공, 실패, 엣지 케이스)
- 핵심 흐름 (3-5단계 요약)
- 수정/추가할 파일 목록
- 중요한 비즈니스 로직 (2주 재노출 기준 등)
- 중요한 분기점

### 쓰지 않을 것
- Props 타입 상세 정의
- 변수명/함수명
- 10단계 이상 상세 로직 (5단계 이내로)
- 에러 메시지 문구
- 스타일링 가이드 (CSS, tailwind 클래스)
- 데이터 포맷

---

## [CRITICAL] 중복 검증

구현 방침 작성 완료 후 중복 검증:

1. **Step 3 vs Step 4 중복**: 기술 전략에서 이미 설명한 내용 반복 여부
2. **과제 간 중복**: 같은 내용 복사-붙여넛기 여부
3. **불필요한 상세**: "쓰지 않을 것" 목록에 있는 내용 포함 여부

문제 발견 시 사용자에게 경고하고 발견된 문제를 구체적으로 설명하고, 해결 방안(특정 instructions/workflow/*.md 가이드 개선)을 제안하세요.

---

## [CRITICAL] PR 분할 재검토

작업량이 많아 보이면 PR 더 쪼개야 한다는 신호:

- 예상 커밋 **8개 이상**
- 수정/추가 파일 **10개 이상**
- 독립적 기능이 하나의 PR에 묶임

> "작업량이 많은 것 같습니다.
> - 수정/추가 파일: [N]개
> - 예상 커밋: [M]개
>
> PR 분할하는 게 좋을 것 같습니다. 어떻게 생각하세요?"

동의 시 Step 2로 돌아가 `project.md` 업데이트 후 현재 PR 범위 축소

---

## [CRITICAL] 사용자 확인 필수

구현 방침 추가 완료 후 사용자에게 확인:

> "구현 방침 추가 완료.
>
> **추가된 구현 방침을 읽고 이해하셨나요?**
> - 로딩/성공/실패/엣지 케이스 대응이 명확한가요?
> - 영향 범위가 적절한가요?
> - 수정할 부분이 있으신가요?
>
> ⚠️ **이해 못한상태에서 구현을 시작하면 구현 시 문제가 발생합니다.**
>
> 이해하셨으면 승인해주세요."
